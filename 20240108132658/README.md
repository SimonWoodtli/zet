# Server Service: Add email server

> ðŸ§ If you don't want to deal with setting up your own email server, but still
> want to use me@mydomain.xxx use [forwardemail].

> ðŸ§ If you use emailwiz any unix user in the mail group gets their own email
> setup with username@yourDomain.xxx

> ðŸ“ Setting up an email server from scratch is a bit tricky. While I want to
> learn it, it's not a priority to me. So that's where install scripts from
> other devs can help out. I wanted to use a very simple one without a database
> or docker to later on learn from. With this in mind I think emailwiz does a
> fantastic job. However if you need something else I listed a few alternatives
> to emailwiz. Try them out and see what works best for you.

1. Login to your domain name provider and make sure your subdomain mail.mydomain.xxx points to your VPSs IPV4, (if you set * as Host value it already does)
1. Login to your VPS
    1. On your servers IPV4 settings add a Reverse DNS with value `mail.simonwoodtli.com` (IP/Address is your servers IPV4)
    1. On your servers IPV6 settings add a Reverse DNS with value `mail.simonwoodtli.com` (IP/Address is your servers IPV6)
1. SSH into VPS
1. get script: `curl -LO lukesmith.xyz/emailwiz.sh`
1. run script: `sh emailwiz.sh`
    1. First prompt from Postfix asks General type: select Internet Site
    1. Second prompt from Postfix asks for your 'System mail name': `simonwoodtli.com`
1. Create a new user 'info' and add it to the 'mail' group `groupadd info; useradd -m -g info -G mail -s /bin/bash -c mail-account info; passwd info`
1. When the script is done it prompts you to add three txt DNS records and a mx record.
    1. Login to your domainname provider
    1. Add the MX record: (add trailing . to 'Answer/Points to' so emails go to mail subdomain)

    ```
    Type:   Host:   Answer/Points to:        TTL:       Priority:
    MX      10      mail.simonwoodtli.com.   300        0
    ```

    3. Add the 3 TXT records: (TODO: change simonwoodtli.com to your domain)

    ```
    Type:   Host:               Answer/TXT value:                                               TTL:        Priority:
    TXT     mail._domainkey     add long public key auto-generated by emailwiz script           300         0
    TXT     _dmarc              v=DMARC1; p=reject; rua=mailto:dmarc@simonwoodtli.com; fo=1     300         0
    TXT                         v=spf1 mx a:mail.simonwoodtli.com -all                          300         0
    ```

1. Unblock mail ports on VPS server:
    1. Login to VPS and open a ticket to ask them to open the mail port on their side.

## Email Client Settings

> ðŸ“ In most cases using an email client like mutt, thunderbird etc. is just
> fine. But if you really do need to use a web interface [checkout rainloop
> setup][rainloop].

### Credentials

* User: info PW: the pw you set for the info UNIX user with `passwd`
* SMTP server: mail.simonwoodtli.com
* SMTP port: 465
* IMAP server: mail.simonwoodtli.com
* IMAP port: 993

[forwardemail]:<https://forwardemail.net/en>
[rainloop]:<https://landchad.net/rainloop/>

Related:

* <https://github.com/LukeSmithxyz/emailwiz>
* <https://www.youtube.com/watch?v=Zg9z8k8pkuM>
* <https://github.com/mjl-/mox>
* <https://poste.io/>
* <https://github.com/docker-mailserver/docker-mailserver>
* <https://github.com/mail-in-a-box/mailinabox>
* TODO: add email alias server selfhost setup with simple login - zet note link
* [20240104161046](/20240104161046/) Fresh Server: First Steps
